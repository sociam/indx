# INDX documentation generation

Documentation is automatically generated by interpreting JavaScript and structured comments within the source code.



## Config files

* `basePath` - Where to look for files to document
* `files` - List of files to parse. Order matters - if you have a class in file A that extends a class in file B, B should be before A. Globs may be used (e.g. js/*.js)
* `require` - Same as files, except this files with not be shown in the documentation (i.e, they will be used for inheritance only). Useful if you extend other files.
* `project` - Attributes about the project put at the top of the documentation: `title`, `version`, `description` (in markdown).

## Comment Style

JS source is parsed using regexps to extract classes and methods. For each of these, the preceding comment is parsed using a grammar.

Comment lines must begin with 3 slashes (`///`) to be used for documentation.

Comments begin with the properties (if any). A property is of the form @property [values]. The rest of the comment will be considered the description. Descriptions should be in markdown.

For example:

	/// @title My awesome class
	/// This awesome class does
	/// some awesome things!



## Files

Comments should be at top of file.

Properties

* `@title`
* `@version` Not yet implemented

Example

	/// @title Some Awesome Library
	/// This library does awesome magical things. Also, I can
	/// have some *markdown* in here - isn't that **awesome**?



## Classes

A class must have a name beginning with a capital letter and may be defined in any of the following forms:

	Animal = function () {
	world.Animal = function () {
	function Animal () {

	// The backbone extend form is also allowed:
	something.awesome.Animal = SomeSuperClass.extend({

Classes beginning with `_` will be considered private and will not be shown in the generated docs.

Comment should precede the class.

Properties

* `@ignore` - ignore this class (do not document it) Not yet implemented
* `@extends Some.SuperClass` - Not yet implemented
* `@name ClassName` Not yet implemented
* `@fullName theFull.ClassName` Not yet implemented
* `@instanceName className` Not yet implemented

Example

	/// @name Cow
	/// @fullName farm.Cow
	/// @instanceName daisy
	/// @extends Animal
	///
	/// This is my cow class. I use daisy as an example cow.



## Methods

A method may be of the following form:

	something.something = function () {
	something: function () {

Methods beginning with `_` will be considered private and will not be shown in the generated docs.

Properties

* `@arg <types> name: comment` - types are pipe (|) separated; types and comment are optional
* A result statement
  * Synchronous return: `@return <types> comment`
  * Asynchronous return:
    `@then <types> comment`
    `@fail <types> comment`
  * Chaining return: @chain
* `@name methodName` Not yet implemented
* `@ignore` Not yet implemented

For @return, @then and @fail, multiple result statements may be made. E.g.,
	@return <string> if file was successfully read
	       <boolean> if file failed to be read

Example (asynchronous method)
	/// @arg <string|number> boxid: the id for the box
	///
	/// @then (<Box> the box)
	/// @fail
	///   (<{ code: 409 }> response) box already exists
	///   (<{ code: -1, error: error obj }> response) other error
	///
	/// Attempts to create a box with the given ID



## Building the docs

To create documentation

	cd docs
	npm install
	node build.js [config file]

Config files are of the form docsgen/config.indx.js

If any errors are showing, nodejs might need upgrading -- v0.10.13 works for me.

If node fails with "Maximum call stack size exceeded", run with a larger stack size:

	node --stack_size=4096 build.js [config file]

Everything will be built in ./build



## Viewing/hosting the docs

Host ./build in some way. e.g.,

	cd ./build
	python -m SimpleHTTPServer 8080



## Abstracts
An abstract is a JS file which contains just the definitions of classes and methods. This is useful when you want to document parts of another library without modifying the library itself.



## Grammars
The comments are parsed using Parsing Expression Grammars (PEG). Explaination of syntax can be found here: http://pegjs.majda.cz/documentation#grammar-syntax-and-semantics



## Templates
Mustache templates are used to generate the documentation.
